{% extends "base_960.html" %}

{% block extrahead %}
<script type="text/javascript" src="{{ STATIC_URL }}js/jquery.query.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/search_form.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/search_adv.js"></script>
{% endblock %}

{% block title %}Mail Archive{% endblock %}

{% block header %}{{ block.super }} - Advanced Search{% endblock %}

{% block content %}

<div id="adv-search-container">
  <div id="adv-search" class="adv-search">
      <form id="rules-form" class="advanced" action="../search" method="get">

        <fieldset id="query_parts">
        <span class="label">Include {{ form.operator }}:</span>
        {% for form in query_formset.forms %}
            <div id="query_chunk_{{ forloop.counter0 }}" class="chunk query_chunk">
            {% if form.non_field_errors %}
              {{ form.non_field_errors }}
            {% endif %}
            {{ form.field }}
            {{ form.qualifier }}
            {{ form.value }}
            <a id="remove_{{ forloop.counter0 }}" class="remove_btn" onclick="false" name="remove_{{ forloop.counter0 }}" href="#">
                <img title="Remove" src="{{ STATIC_URL }}admin/img/icon_deletelink.gif" alt="Remove">
            </a>
            </div>
        {% endfor %}
        <a id="add_query_part" class="addlink addParamBtn" href="#">Add another</a>
        </fieldset>

        <fieldset id="not_parts">
        <span class="label">but do not include: </span>
        {% for form in not_formset.forms %}
            <div id="not_chunk_{{ forloop.counter0 }}" class="chunk not_chunk">
            {% if form.non_field_errors %}
              {{ form.non_field_errors }}
            {% endif %}
            {{ form.field }}
            {{ form.qualifier }}
            {{ form.value }}
            <a id="not_remove_{{ forloop.counter0 }}" class="not_remove_btn" onclick="false" href="#">
                <img title="Remove" src="{{ STATIC_URL }}admin/img/icon_deletelink.gif" alt="Remove">
            </a>
            </div>
        {% endfor %}
        <a id="add_not_part" class="addlink addParamBtn" href="#">Add another</a>
        </fieldset>
      </form>

      <form id="advanced-search-form" class="advanced" action="../search" method="get">
        <fieldset id="not_parts">
        <span class="label">filter results by:</span>
            <table id="advanced-search-table" class="clean">
                <tr>
                    <td>Time:</td>
                    <td>{{ form.qdr }}</td>
                </tr>
                <tr id="custom_date">
                        <td>Start:</td><td>{{ form.start_date }}</td><td>End:</td><td>{{ form.end_date }}</td>
                </tr>
                <tr>
                    <td>List:</td>
                    <td><input id="email_list_search" class="defaultText" type="text" size="30" title="Start typing name and pick from list"></td>
                </tr>
                <!-- <input type="hidden" name="email_list" id="email_list" /> -->
                {{ form.email_list }}
            </table>

            <fieldset id="list-fieldset2" class="list-fieldset">
              <legend>Lists to Search</legend>
              <ul id="email_list_list"></ul>
            </fieldset>

        </fieldset>

        <br />
        <hr />

        <input id="id_q" type="text" name="q" readonly="readonly" />
        <input id="as" type="hidden" name="as" value="1" />

        <div class="button-group">
          <ul>
            <li><button type="submit">Search</button></li>
          </ul>
        </div> <!-- button-group -->
      </form>
  </div> <!-- advanced-search-->
</div>

{% endblock %}


